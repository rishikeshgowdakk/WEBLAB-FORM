<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Visitor Counter â€” Rishikesh</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{
            --bg:#f6f7fb;
            --card:#ffffff;
            --muted:#6b7280;
            --accent:#2563eb;
        }
        *{box-sizing:border-box}
        body{
            margin:0; font-family:Inter,system-ui,Segoe UI,Arial;
            background:linear-gradient(180deg,var(--bg),#eef2ff);
            color:#111827; -webkit-font-smoothing:antialiased;
            padding:28px;
            display:flex; align-items:center; justify-content:center; min-height:100vh;
        }
        .page{
            width:100%; max-width:980px;
            display:grid; grid-template-columns: 1fr 380px; gap:28px; align-items:start;
        }
        header.site{
            grid-column:1 / -1; display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;
        }
        .brand{font-weight:700; color:var(--accent); font-size:18px}
        .meta{font-size:13px; color:var(--muted)}
        .leftCard{background:var(--card); border-radius:12px; padding:20px; box-shadow:0 8px 30px rgba(16,24,40,0.06)}
        .profile{display:flex; gap:14px; align-items:center}
        .avatar{width:68px; height:68px; border-radius:12px; background:linear-gradient(135deg,var(--accent),#7c3aed); display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px}
        .studentInfo{font-weight:600}
        .studentSmall{color:var(--muted); font-size:13px}
        .cardBig{background:linear-gradient(180deg,#ffffff, #fbfdff); padding:34px; border-radius:12px; text-align:center; box-shadow:0 16px 40px rgba(16,24,40,0.08); position:relative}
        .cardBig h1{margin:0; font-size:28px; color:#111827}
        .counterWrap{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:18px}
        .counterBadge{background:linear-gradient(90deg,#eef2ff,#ffffff); padding:18px 28px; border-radius:12px; box-shadow:0 8px 24px rgba(37,99,235,0.08); display:inline-block}
        .counterNum{font-size:54px; font-weight:800; color:var(--accent); line-height:1}
        .counterLabel{font-size:13px;color:var(--muted); margin-top:6px}
        .counterActions{margin-left:8px; display:flex; flex-direction:column; gap:8px}
        .btn{background:var(--accent); color:#fff; border:0; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600}
        .btn.ghost{background:transparent;color:var(--accent); border:1px solid rgba(37,99,235,0.12)}
        .pop{transform-origin:center center; animation:pop .36s ease}
        @keyframes pop{0%{transform:scale(.6);opacity:0}50%{transform:scale(1.08);opacity:1}100%{transform:scale(1);opacity:1}}
        /* simple confetti */
        .confetti{pointer-events:none; position:absolute; inset:0; overflow:hidden}
        .confetti i{position:absolute; width:8px;height:8px; background:var(--accent); opacity:0.95; transform:translateY(-10px); border-radius:2px}
        .rightCard{background:var(--card); border-radius:12px; padding:20px; box-shadow:0 8px 30px rgba(16,24,40,0.06)}
        @media(max-width:880px){.page{grid-template-columns:1fr;}.rightCard{order:2}.leftCard{order:1}}
    </style>
</head>
<body>
    <div class="page" role="main">
        <header class="site">
            <div class="brand">JSSATEB â€¢ Visitor Counter</div>
            <div class="meta">Name: Rishikesh Gowda K K â€” USN: 1JS23CS136</div>
        </header>

        <section class="leftCard">
            <div class="profile">
                <div class="avatar">RG</div>
                <div>
                    <div class="studentInfo">Rishikesh Gowda K K</div>
                    <div class="studentSmall">USN: 1JS23CS136</div>
                </div>
            </div>

            <div style="height:18px"></div>

            <div class="cardBig">
                <h1>Welcome to Our Website!</h1>
                <div class="counterWrap">
                    <div class="counterBadge pop" id="counterBadge">
                        <div class="counterNum" id="counter">1</div>
                        <div class="counterLabel">Visitors (local)</div>
                    </div>
                    <div class="counterActions">
                        <button class="btn" id="viewBtn">Celebrate ðŸŽ‰</button>
                        <button class="btn ghost" id="resetBtn">Reset</button>
                    </div>
                </div>
                <div style="margin-top:8px;color:var(--muted)">counts are stored in your browser and increment on each visit</div>
                <div class="confetti" id="confetti"></div>
            </div>
        </section>

        <aside class="rightCard">
            <div style="font-weight:700; color:var(--accent); margin-bottom:8px">Quick Info</div>
            <div style="color:var(--muted); font-size:14px;">This counter uses your browser storage to increment each visit. The visual style has been refreshed while preserving the same numeric output.</div>
        </aside>
    </div>

    <script>
        // Visitor counter with animated transition + confetti
        const KEY = 'visitorCount';
        const counterEl = document.getElementById('counter');
        const badge = document.getElementById('counterBadge');
        const confettiRoot = document.getElementById('confetti');

        function readCount(){
            const v = localStorage.getItem(KEY);
            return v ? parseInt(v,10) : 0;
        }

        function writeCount(n){
            localStorage.setItem(KEY, n);
        }

        function animateNumber(from, to, duration = 700){
            const start = performance.now();
            const delta = to - from;
            function frame(now){
                const t = Math.min(1, (now - start) / duration);
                const eased = 1 - Math.pow(1 - t, 3);
                const current = Math.floor(from + delta * eased);
                counterEl.textContent = current;
                if(t < 1) requestAnimationFrame(frame);
                else counterEl.textContent = to;
            }
            requestAnimationFrame(frame);
        }

        function popAnimation(){
            badge.classList.remove('pop');
            // retrigger
            void badge.offsetWidth;
            badge.classList.add('pop');
        }

        function emitConfetti(count = 18){
            const colors = ['#2563eb','#7c3aed','#f97316','#10b981','#ef4444'];
            for(let i=0;i<count;i++){
                const el = document.createElement('i');
                el.style.left = (50 + (Math.random()-0.5)*60) + '%';
                el.style.top = '10%';
                el.style.background = colors[Math.floor(Math.random()*colors.length)];
                confettiRoot.appendChild(el);
                const dx = (Math.random()-0.5) * 300;
                const dy = 200 + Math.random()*200;
                const rot = (Math.random()-0.5)*720;
                el.animate([
                    {transform:`translate3d(0,0,0) rotate(0deg)`, opacity:1},
                    {transform:`translate3d(${dx}px,${dy}px,0) rotate(${rot}deg)`, opacity:0}
                ], {duration:800+Math.random()*600, easing:'cubic-bezier(.2,.8,.2,1)'}).onfinish = ()=> el.remove();
            }
        }

        function incrementAndShow(){
            const prev = readCount();
            const next = prev + 1;
            writeCount(next);
            animateNumber(Math.max(0, prev), next);
            popAnimation();
            // celebrate on milestones (every 5) or simple small confetti
            if(next % 5 === 0) emitConfetti(30); else emitConfetti(10);
        }

        // Reset handler
        document.getElementById('resetBtn').addEventListener('click', ()=>{
            writeCount(0);
            animateNumber(parseInt(counterEl.textContent,10)||0, 0);
            popAnimation();
        });

        // Manual celebrate button
        document.getElementById('viewBtn').addEventListener('click', ()=>{
            emitConfetti(40);
            popAnimation();
        });

        // On load: increment and animate from previous
        window.addEventListener('load', ()=>{
            const prev = readCount();
            // if no previous value, treat as increment to 1
            incrementAndShow();
        });
    </script>
</body>
</html>
